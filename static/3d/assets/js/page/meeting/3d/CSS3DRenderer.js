THREE.CSS3DObject=function(a){THREE.Object3D.call(this);this.element=a;this.element.style.position="absolute";this.element.style.WebkitTransformStyle="preserve-3d";this.element.style.MozTransformStyle="preserve-3d";this.element.style.oTransformStyle="preserve-3d";this.element.style.transformStyle="preserve-3d"};THREE.CSS3DObject.prototype=Object.create(THREE.Object3D.prototype);THREE.CSS3DSprite=function(a){THREE.CSS3DObject.call(this,a)};THREE.CSS3DSprite.prototype=Object.create(THREE.CSS3DObject.prototype);THREE.CSS3DRenderer=function(){console.log("THREE.CSS3DRenderer",THREE.REVISION);var b,d;var j,h;var i=new THREE.Matrix4();var e=document.createElement("div");e.style.overflow="hidden";e.style.WebkitTransformStyle="preserve-3d";e.style.WebkitPerspectiveOrigin="50% 50%";e.style.MozTransformStyle="preserve-3d";e.style.MozPerspectiveOrigin="50% 50%";e.style.oTransformStyle="preserve-3d";e.style.oPerspectiveOrigin="50% 50%";e.style.transformStyle="preserve-3d";e.style.perspectiveOrigin="50% 50%";this.domElement=e;var f=document.createElement("div");f.style.WebkitTransformStyle="preserve-3d";f.style.MozTransformStyle="preserve-3d";f.style.oTransformStyle="preserve-3d";f.style.transformStyle="preserve-3d";e.appendChild(f);this.cameraElement=f;this.setSize=function(m,l){b=m;d=l;j=b/2;h=d/2;e.style.width=m+"px";e.style.height=l+"px";f.style.width=m+"px";f.style.height=l+"px"};var k=function(l){return Math.abs(l)<0.000001?0:l};var g=function(l){var m=l.elements;return"matrix3d("+k(m[0])+","+k(-m[1])+","+k(m[2])+","+k(m[3])+","+k(m[4])+","+k(-m[5])+","+k(m[6])+","+k(m[7])+","+k(m[8])+","+k(-m[9])+","+k(m[10])+","+k(m[11])+","+k(m[12])+","+k(-m[13])+","+k(m[14])+","+k(m[15])+")"};var c=function(l){var m=l.elements;return"translate3d(-50%,-50%,0) matrix3d("+k(m[0])+","+k(m[1])+","+k(m[2])+","+k(m[3])+","+k(-m[4])+","+k(-m[5])+","+k(-m[6])+","+k(-m[7])+","+k(m[8])+","+k(m[9])+","+k(m[10])+","+k(m[11])+","+k(m[12])+","+k(m[13])+","+k(m[14])+","+k(m[15])+")"};var a=function(n,r){if(n instanceof THREE.CSS3DObject){var q;if(n instanceof THREE.CSS3DSprite){i.copy(r.matrixWorldInverse);i.transpose();i.copyPosition(n.matrixWorld);i.scale(n.scale);i.elements[3]=0;i.elements[7]=0;i.elements[11]=0;i.elements[15]=1;q=c(i)}else{q=c(n.matrixWorld)}var p=n.element;p.style.WebkitTransform=q;p.style.MozTransform=q;p.style.oTransform=q;p.style.transform=q;if(p.parentNode!==f){f.appendChild(p)}}for(var o=0,m=n.children.length;o<m;o++){a(n.children[o],r)}};this.render=function(o,n){var l=0.5/Math.tan(THREE.Math.degToRad(n.fov*0.5))*d;e.style.WebkitPerspective=l+"px";e.style.MozPerspective=l+"px";e.style.oPerspective=l+"px";e.style.perspective=l+"px";o.updateMatrixWorld();if(n.parent===undefined){n.updateMatrixWorld()}n.matrixWorldInverse.getInverse(n.matrixWorld);var m="translate3d(0,0,"+l+"px)"+g(n.matrixWorldInverse)+" translate3d("+j+"px,"+h+"px, 0)";f.style.WebkitTransform=m;f.style.MozTransform=m;f.style.oTransform=m;f.style.transform=m;a(o,n)}};